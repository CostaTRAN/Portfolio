<!DOCTYPE html>
<html lang="fr" vocab="http://schema.org/" typeof="WebPage" xmlns="http://www.w3.org/1999/xhtml">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>CV de Costa TRAN</title>
   <!-- Styles CSS -->
   <link rel="stylesheet" type="text/css" href="styles.css">
   <!-- Balise alternate pour SEO -->
   <link rel="alternate" hreflang="en" href="index.html?lang=en">
   <link rel="alternate" hreflang="fr" href="index.html?lang=fr">
   <link rel="alternate" hreflang="ja" href="index.html?lang=ja">
   <script>
      document.addEventListener("DOMContentLoaded", function () {
         function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
         }

         function getLanguage() {
            let lang = getQueryParam('lang');
            if (lang) return lang;

            lang = sessionStorage.getItem('lang');
            if (lang) return lang;

            lang = navigator.language.split('-')[0];
            if (['en', 'fr', 'ja'].includes(lang)) return lang;

            return 'fr';
         }

         const lang = getLanguage();
         sessionStorage.setItem('lang', lang);
         // URL du fichier XML et XSL
         var selectedXmlFile = `./${lang}/cv.xml`;
         var selectedXslFile = `./${lang}/cv.xsl`;

         function transformXMLtoHTML(xmlString, xslString) {
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(xmlString, "text/xml");
            const xslDoc = parser.parseFromString(xslString, "text/xml");

            const xsltProcessor = new XSLTProcessor();
            xsltProcessor.importStylesheet(xslDoc);

            const resultFragment = xsltProcessor.transformToFragment(xmlDoc, document);

            const tempDiv = document.createElement('div');
            tempDiv.appendChild(resultFragment);

            return tempDiv.innerHTML;
         }

         // Charge le contenu des fichiers XML et XSL
         function fetchXMLandXSL(xmlFile, xslFile) {
            fetch(xmlFile)
               .then(response => response.text())
               .then(xmlString => {
                  fetch(xslFile)
                     .then(response => response.text())
                     .then(xslString => {
                        // Appelle la fonction transformXMLtoHTML avec les contenus des fichiers XML et XSL
                        const transformedHTML = transformXMLtoHTML(xmlString, xslString);
                        document.body.innerHTML = transformedHTML;

                        document.getElementById('lang-selector').addEventListener('click', function (event) {
                           if (event.target.classList.contains('flag')) {
                              const selectedLang = event.target.dataset.lang;
                              window.history.pushState({}, '', `?lang=${selectedLang}`);
                              sessionStorage.setItem('lang', selectedLang);
                              selectedXmlFile = `./${selectedLang}/cv.xml`;
                              selectedXslFile = `./${selectedLang}/cv.xsl`;
                              fetchXMLandXSL(selectedXmlFile, selectedXslFile);
                           }
                        });
                     })
                     .catch(error => console.error('Error loading XSL file:', error));
               })
               .catch(error => console.error('Error loading XML file:', error));
         }

         fetchXMLandXSL(selectedXmlFile, selectedXslFile);
      });
   </script>
</head>

<body>
   <header>
      <h1 id="title">CV de Costa TRAN</h1>
   </header>
   <nav>
      <a href="index.html">Accueil</a>
      <a href="cv.html">CV</a>
      <div id="lang-selector">
         <img src="./img/fr-flag.png" alt="Français" class="flag" data-lang="fr">
         <img src="./img/en-flag.png" alt="English" class="flag" data-lang="en">
         <img src="./img/ja-flag.png" alt="日本語" class="flag" data-lang="ja">
      </div>
   </nav>
   <main>
      <section>
         <h2>Informations personnelles</h2>
         <p>
            <strong>Prénom : </strong>Costa
         </p>
         <p>
            <strong>Nom : </strong>Tran
         </p>
         <p>
            <strong>Adresse : </strong>123 Rue Exemple, 75000 Paris, France
         </p>
         <p>
            <strong>Téléphone : </strong>+33 1 23 45 67 89
         </p>
         <p>
            <strong>Email : </strong>costa.tran@hotmail.com
         </p>
         <p>
            <strong>Site Web : </strong>
            <a href="https://costa-tran.netlify.app/">
               https://costa-tran.netlify.app/
            </a>
         </p>
         <p>
            <strong>Liens : </strong>
            <a href="https://github.com/CostaTRAN">
               https://github.com/CostaTRAN
            </a>
         </p>
      </section>
      <section>
         <h2>Expériences professionnelles</h2>
         <ul>
            <li>
               <h3>2022 - 2025</h3>
               <ul>
                  <li>
                     <p>
                        <strong>Rôle : </strong> Apprenti ingénieur logiciel
                     </p>
                  </li>
                  <li>
                     <p>
                        <strong>Entreprise : </strong>Forvia
                     </p>
                  </li>
                  <li>
                     <p>
                        <strong>Lieu : </strong>Paris, France
                     </p>
                  </li>
                  <li>
                     <p>
                        <strong>Description de la mission : </strong>Développement d'un outil de test pour la stack
                        Bluetooth.
                     </p>
                  </li>
               </ul>
            </li>
         </ul>
      </section>
      <section>
         <h2>Formations</h2>
         <ul>
            <li>
               <h3>2022 - 2025</h3>
               <ul>
                  <li>
                     <p>
                        <strong>Diplôme d'Ingénieur Informatique</strong>
                     </p>
                  </li>
                  <li>
                     <p>
                        <strong>Institution : </strong>Sup Galilée
                     </p>
                  </li>
               </ul>
            </li>
            <li>
               <h3>2020 - 2022</h3>
               <ul>
                  <li>
                     <p>
                        <strong>Diplôme Universitaire Technologique Informatique (DUT)</strong>
                     </p>
                  </li>
                  <li>
                     <p>
                        <strong>Institution : </strong>Institut Universitaire Technologique de Villetaneuse (IUT)
                     </p>
                  </li>
               </ul>
            </li>
            <li>
               <h3>2018 - 2020</h3>
               <ul>
                  <li>
                     <p>
                        <strong>Baccalauréat Général Scientifique</strong>
                     </p>
                  </li>
                  <li>
                     <p>
                        <strong>Institution : </strong>Lycée La Salle - Saint Rosaire
                     </p>
                  </li>
               </ul>
            </li>
         </ul>
      </section>
      <section>
         <h2>Compétences</h2>
         <ul>
            <li>HTML</li>
            <li>CSS</li>
            <li>JavaScript</li>
            <li>C++</li>
            <li>XML</li>
            <li>JSON</li>
            <li>MySQL</li>
         </ul>
      </section>
      <section>
         <h2>Langues</h2>
         <ul>
            <li>
               <strong>Français: </strong>Natif
            </li>
            <li>
               <strong>Anglais: </strong>B1
            </li>
            <li>
               <strong>Japonais: </strong>Débutant
            </li>
         </ul>
      </section>
   </main>
   <footer>
      <p id="copyright">&#169; 2024 Costa TRAN. Tous droits réservés.</p>
   </footer>
</body>

</html>