<!DOCTYPE html>
<html lang="fr" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV de Costa TRAN</title>
    <!-- Styles CSS -->
    <link rel="stylesheet" href="styles.css">
    <!-- Balise alternate pour SEO -->
    <link rel="alternate" hreflang="en" href="index.html?lang=en">
    <link rel="alternate" hreflang="fr" href="index.html?lang=fr">
    <link rel="alternate" hreflang="ja" href="index.html?lang=ja">

    <script>
        document.addEventListener("DOMContentLoaded", function() {

            function getQueryParam(param) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(param);
            }

            function getLanguage() {
                let lang = getQueryParam('lang');
                if (lang) return lang;

                lang = sessionStorage.getItem('lang');
                if (lang) return lang;

                lang = navigator.language.split('-')[0];
                if (['en', 'fr', 'ja'].includes(lang)) return lang;

                return 'fr';
            }

            const lang = getLanguage();
            sessionStorage.setItem('lang', lang);
            // URL du fichier XML et XSL
            const xmlFile = `./${lang}/cv.xml`;
            const xslFile = `./${lang}/cv.xsl`;

            function transformXMLtoHTML(xmlString, xslString) {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlString, "text/xml");
                const xslDoc = parser.parseFromString(xslString, "text/xml");

                const xsltProcessor = new XSLTProcessor();
                xsltProcessor.importStylesheet(xslDoc);

                const resultFragment = xsltProcessor.transformToFragment(xmlDoc, document);

                const tempDiv = document.createElement('div');
                tempDiv.appendChild(resultFragment);

                return tempDiv.innerHTML;
            }

            // Charger le contenu des fichiers XML et XSL
            fetch(xmlFile)
                .then(response => response.text())
                .then(xmlString => {
                    fetch(xslFile)
                        .then(response => response.text())
                        .then(xslString => {
                            // Appeler la fonction transformXMLtoHTML avec les contenus des fichiers XML et XSL
                            const transformedHTML = transformXMLtoHTML(xmlString, xslString);
                            document.body.innerHTML = transformedHTML; // Injection dans le corps du document
                        })
                        .catch(error => console.error('Error loading XSL file:', error));
                })
                .catch(error => console.error('Error loading XML file:', error));
        });
    </script>
</head>
<body id="body-content">
    <header>
        <h1 id="title">CV de Costa TRAN</h1>
        <nav>
            <a href="index.html">Retour à l'accueil</a>
        </nav>
        <!-- Sélecteur de langue -->
        <div>
            <a href="?lang=fr"><img src="./img/fr-flag.png" alt="Français"></a>
            <a href="?lang=en"><img src="./img/en-flag.png" alt="English"></a>
            <a href="?lang=ja"><img src="./img/ja-flag.png" alt="日本語"></a>
        </div>
    </header>
    <main id="cv-content">
         <section>
            <h2>Informations personnelles</h2>
            <p>
               <strong>Nom: </strong>Costa TRAN</p>
            <p>
               <strong>Adresse: </strong>123 Rue Exemple, 75000 Paris, France</p>
            <p>
               <strong>Téléphone: </strong>+33 1 23 45 67 89</p>
            <p>
               <strong>Email: </strong>costa.tran@hotmail.com</p>
            <p>
               <strong>Site Web: </strong>
               <a href="https://costa-tran.netlify.app/">https://costa-tran.netlify.app/</a>
            </p>
         </section>
         <section>
            <h2>Profil</h2>
            <p>
               Étudiant à Sup Galilée en tant qu'ingénieur informatique en apprentissage.
           </p>
         </section>
         <section>
            <h2>Expérience professionnelle</h2>
               Apprenti ingénieur logiciel
               Forvia
               Paris, France
               05/09/2022
               
                   Développement d'un outil de test pour la stack Bluetooth.
               
           </section>
         <section>
            <h2>Formation</h2>
            <p>
               <strong>Diplôme d'Ingénieur Informatique (</strong>2022-2025)</p>
            <p>
               <strong>Institution: </strong>Sup Galilée</p>
            <p>
               <strong>Baccalauréat Général Scientifique (</strong>2018 - 2020)</p>
            <p>
               <strong>Institution: </strong>Lycée La Salle - Saint Rosaire</p>
         </section>
         <section>
            <h2>Compétences</h2>
            <ul>
               <li>HTML</li>
               <li>CSS</li>
               <li>JavaScript</li>
               <li>C++</li>
               <li>XML</li>
               <li>JSON</li>
               <li>MySQL</li>
            </ul>
         </section>
         <section>
            <h2>Langues</h2>
            <ul>
               <li>
                  <strong>Français: </strong>Natif</li>
               <li>
                  <strong>Anglais: </strong>B1</li>
               <li>
                  <strong>Japonais: </strong>Débutant</li>
            </ul>
         </section>
    </main>
</body>
</html>